# Ибрагимова Алина Александровна, БПИ226, ИДЗ4. Вариант 5.
## Условие:
![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/c4e68ca4-50d1-4c81-9e29-492357752829)
![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/13b49712-5171-4988-bc14-ecd3a978ed5f)

## Как я поняла условие:
Есть база данных. Есть N потоков-читателей. Есть K потоков-писателей. 

Читатели: просматривают случайные записи базы (+ вывод номер-индекс-значение).

Писатели: выбирают случаную запись, случайно сменяют у неё значение (+ вывод номер-индекс-старое-новое_значение). 

БД: некая структура, каждый элемент которой содержит индекс и значение. При добавлении сразу же сортируется (по какому критерию?), могут индексы записей поменяться.

Доступы к БД: райтер имеет исключительный доступ к БД. Ридер может использовать БД, только если к нему не обращается ни один из писателей. Несколько ридеров одновременно могут использовать БД.

## Структура загруженного решения:
Претендую на 4-5.

В папке 4-5 содержатся данные (программа avs_4_threads и тесты tests), необходимые на 4-5 баллов.

Отчёт общий для всех оценок.

## Предупреждение:
Читатели = ридеры.
Писатели = райтеры.

Иногда называю так, иногда по второму варианту. Первый как из задания, а второй как в коде их назвала, поэтому прыгаю по названиям.

# Критерии на 4-5:
## 1. Соблюдены общие требования к отчету
![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/6d9ff87a-688e-40ea-a75e-db7b266e92db)
1-3 пункты в шапке отчёта.

4-5 пункты: так как в программе на 4-5 из данных, которые мы можем предоставить, только количество потоков райтеров и ридеров, то тесты будут ручные, и значения из тестовых файлов надо будет вставлять в консоль. В папке 4-5 есть папка tests. Там три теста:

1) количество потоков райтеров и ридеров примерно равно;
2) ридеров сильно больше, чем райтеров;
3) райтеров сильно больше, чем ридеров;

   На консоли это выглядит вот так (т.к. это потоки, то каждый раз вывод будет разным + у меня программа не имеет специального логического конца, поэтому она работает ровно до момента, пока её вручную не прервать, так что в тестах и на скринах далеко не полный output) - просто примеры:
   ![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/2b034cc4-3325-454c-88d7-2b422021e845)
   ![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/923a60b1-4328-41ca-9528-dba2e98efad3)
   ![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/ac3676a9-4d5d-4314-b994-19bc02beee56)

6 пункт: текст программы на 4-5 хранится в папке 4-5 (см. пункт "Структура загруженного решения").

7 пункт: мяу.

## 2. Сценарий
![изображение](https://github.com/AlinaMalinafff/AVS/assets/150148650/069290ea-141b-4759-8a86-bdfe577bd1a4)
(Програмнная реализация и подробное описание прослеживается в комментариях кода - почти каждая строчка закомментирована)

Сценарий общий (сущности: пользователь, читатель, писатель, датабаза):
0. Инициализируется датабаза.
1. Ввод количества ридеров пользователем.
2. Ввод количества райтеров пользователем.
3. Создание "яслей" для потоков, где их хранить.
4. Заполнение яслей рождающимися потоками ридеров, дальше райтеров.
5. Запускаются потоки читателей: захватывают датабазу, смотрят значение рандомного элемента, проверка счётчика, если равен текущему идетификатору, продолжает пакостить, иначе блокируется и ожидает сигнала; выводит информацию на консоль, проверяет счётчик, отпускает БД и начинает слудующий.
6. Потом запускается каждый поток писатель - тут они уже не могут работать параллельно, каждый захватывает БД только для себя любимого: пауза, эксклюзивно захватывает БД, меняет значение в базе, , выводит в консоль, заканчивает экслюзивный доступ к БД.
7. Всё взаимодейтсвие межзду потоками двух типов и между собой совершается через мьютекс, условную переменную, рвлок и счётчик читателей.

## Модель параллельных вычислений:
Портфель задач, где разделяемая переменная - БД.

## Входные данные:
Целое положительное число. (инт)

Целое положительное число. (инт)

## Другие критерии:
Консольное приложение реализовано.

Ввод с консоли.

Генераторы реализованы, их даипазоны рассчитываются через модули от деления, все данные подписаны в комментариях кода.

Вывод информативен и отражает происходящее.

Комменатрии в программе есть.

Примеры результатов раоты программы есть в качестве скриншотов.

# На 6-7

   

   

